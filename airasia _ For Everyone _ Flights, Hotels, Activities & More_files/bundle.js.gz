!function(t){var e={};function a(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=e,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(r,s,function(e){return t[e]}.bind(null,s));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=0)}([function(t,e,a){"use strict";var r=a(1).CrossStorageHub;var s=JSON.parse('["https://www.airasia.com","https://airasia.com","http://booking2.airasia.com","https://booking2.airasia.com","http://www.ourshop.com","https://www.ourshop.com","https://aseanpass.airasia.com","https://www.airasiabig.com","https://redemption.airasiabig.com","https://jace.airasia.com","https://mobile.airasia.com","https://www.rokki.com","https://bigpayme.com","https://www.airasiacards.com","https://api.airasiacards.com","https://payment.airasia.com","https://airasia-custprofile-graphql.appspot.com","http://prod-sso-widget.s3-website-ap-southeast-1.amazonaws.com","https://sso-widget.airasia.com","https://stories.travel360.com","https://airasia-travel360api.appspot.com","https://k.apitravel360.com","https://www.travel360.com","https://giftvoucher.airasia.com","https://airasia-custprofile-graphql.appspot.com","https://deals.airasia.com","https://www.ppairasia.com","https://theorigin-www.airasia.com","http://cms.airasia.com","https://airasia-flightstatus.firebaseapp.com","https://hitme.airasia.com","https://booking.airasia.com","https://theorigin-booking.airasia.com","https://preprodbooking3.airasia.com","https://ppcheckin.airasia.com","https://ppbdf.bigdutyfree.com","https://ppaseanpass.airasia.com","https://preprodjace.airasia.com","https://preprodredemption.airasiabig.com","https://ppselect3.airasia.com","https://ppselect.airasia.com","https://www.newppcheckin.airasia.com","https://newppcheckin.airasia.com","http://local.airasia.com:4200","https://voyager.airasia.com","https://origin-booking2.airasia.com","https://teleport.social","https://web-santan.azurewebsites.net","https://open.weixin.qq.com","https://getvidi.co","https://order.santan.com.my","https://app.tcocafe.com.my","https://ava-entrypoint-refund-dot-airasia-ava-prod.appspot.com","https://airasia.cn","https://www.airasia.cn","https://bigcontent.airasiabig.com","https://dutyfree.airasia.com","http://172.24.40.163","https://wifi.airasia.com","https://ourdaily.co","https://www.ourdaily.co","https://payment-api.airasia.com","https://ourdutyfree.airasia.com","https://pplemon.airasia.com","https://shop.airasia.com","https://bigxchange.airasiabig.com","https://airasiahealth.com","https://lemon.ppairasia.com","https://food.airasia.com","https://fresh.airasia.com","https://sso-widget.ppairasia.com","https://ikhlas.com","https://points-transfer.airasiabig.com","https://support.airasia.com","https://bigdeals.airasiabig.com","https://bigxchange-v2.airasiabig.com","https://beauty.airasia.com","https://svc-prod-user.dacsee.io","https://svc-prod-push.dacsee.io","https://teleport.delivery","http://payment.ppairasia.com","https://payment.ppairasia.com","https://food-new.airasia.com","https://mp-business-service.airasia.cn","https://3pca.airasia.com","https://grocer.airasia.com","https://bigxchange-prd.airasiabig.com","https://facesapi.airasia.com","https://mobile-customer.ikhlas.com","https://core.engine.easygds.com","https://travelmall.airasia.com","https://huawei.airasia.com","https://sso.airasiaacademy.com","https://integrationtests.airasia.com","https://bankrakyat.airasiabig.com","https://aahol.apps.ota.airasia.com","https://food-id.airasia.com","https://dutytravel.airasia.com","https://growth.airasiatech.com","https://sso-ava-dot-airasia-ava-prod.appspot.com","https://ikhlas.airasia.com/holidays/shopping/home","test-sso-create-client","https://mp.airasia.cn/","https://www.airasia.com/check-in/","https://xchange.airasiabig.com","https://ssor.airasia.com","https://sso-dashboard.airasia.com","https://mgm.airasiabig.com"]');if(!Array.isArray(s)||!s.length)throw new Error("Hub client whitelist non-array or empty");console.log("last: ",s[s.length-1]);var o=s.map((function(t){return{origin:new RegExp("^"+t.replace(/\./g,"\\.")+"$","i"),allow:["get","set","del","getKeys","clear"]}}));r.init(o)},function(t,e,a){t.exports={CrossStorageClient:a(2),CrossStorageHub:a(3)}},function(t,e,a){!function(a){function r(t,e){var a;e=e||{},this._id=r._generateUUID(),this._promise=e.promise||Promise,this._frameId=e.frameId||"CrossStorageClient-"+this._id,this._origin=r._getOrigin(t),this._requests={},this._connected=!1,this._closed=!1,this._count=0,this._timeout=e.timeout||5e3,this._listener=null,this._installListener(),e.frameId&&(a=document.getElementById(e.frameId)),a&&this._poll(),a=a||this._createFrame(t),this._hub=a.contentWindow}r.frameStyle={display:"none",position:"absolute",top:"-999px",left:"-999px"},r._getOrigin=function(t){var e;return(e=document.createElement("a")).href=t,e.host||(e=window.location),((e.protocol&&":"!==e.protocol?e.protocol:window.location.protocol)+"//"+e.host).replace(/:80$|:443$/,"")},r._generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))},r.prototype.onConnect=function(){var t=this;return this._connected?this._promise.resolve():this._closed?this._promise.reject(new Error("CrossStorageClient has closed")):(this._requests.connect||(this._requests.connect=[]),new this._promise((function(e,a){var r=setTimeout((function(){a(new Error("CrossStorageClient could not connect"))}),t._timeout);t._requests.connect.push((function(t){if(clearTimeout(r),t)return a(t);e()}))})))},r.prototype.set=function(t,e){return this._request("set",{key:t,value:e})},r.prototype.get=function(t){var e=Array.prototype.slice.call(arguments);return this._request("get",{keys:e})},r.prototype.del=function(){var t=Array.prototype.slice.call(arguments);return this._request("del",{keys:t})},r.prototype.clear=function(){return this._request("clear")},r.prototype.getKeys=function(){return this._request("getKeys")},r.prototype.close=function(){var t=document.getElementById(this._frameId);t&&t.parentNode.removeChild(t),window.removeEventListener?window.removeEventListener("message",this._listener,!1):window.detachEvent("onmessage",this._listener),this._connected=!1,this._closed=!0},r.prototype._installListener=function(){var t=this;this._listener=function(e){var a,r,s;if(!t._closed&&e.data&&"string"==typeof e.data&&("null"===e.origin?"file://":e.origin)===t._origin)if("cross-storage:unavailable"!==e.data){if(-1!==e.data.indexOf("cross-storage:")&&!t._connected){if(t._connected=!0,!t._requests.connect)return;for(a=0;a<t._requests.connect.length;a++)t._requests.connect[a](r);delete t._requests.connect}if("cross-storage:ready"!==e.data){try{s=JSON.parse(e.data)}catch(t){return}s.id&&t._requests[s.id]&&t._requests[s.id](s.error,s.result)}}else{if(t._closed||t.close(),!t._requests.connect)return;for(r=new Error("Closing client. Could not access localStorage in hub."),a=0;a<t._requests.connect.length;a++)t._requests.connect[a](r)}},window.addEventListener?window.addEventListener("message",this._listener,!1):window.attachEvent("onmessage",this._listener)},r.prototype._poll=function(){var t,e,a;a="file://"===(t=this)._origin?"*":t._origin,e=setInterval((function(){if(t._connected)return clearInterval(e);t._hub&&t._hub.postMessage("cross-storage:poll",a)}),1e3)},r.prototype._createFrame=function(t){var e,a;for(a in(e=window.document.createElement("iframe")).id=this._frameId,r.frameStyle)r.frameStyle.hasOwnProperty(a)&&(e.style[a]=r.frameStyle[a]);return window.document.body.appendChild(e),e.src=t,e},r.prototype._request=function(t,e){var a,r;return this._closed?this._promise.reject(new Error("CrossStorageClient has closed")):((r=this)._count++,a={id:this._id+":"+r._count,method:"cross-storage:"+t,params:e},new this._promise((function(t,e){var s,o,i;s=setTimeout((function(){r._requests[a.id]&&(delete r._requests[a.id],e(new Error("Timeout: could not perform "+a.method)))}),r._timeout),r._requests[a.id]=function(o,i){if(clearTimeout(s),delete r._requests[a.id],o)return e(new Error(o));t(i)},Array.prototype.toJSON&&(o=Array.prototype.toJSON,Array.prototype.toJSON=null),i="file://"===r._origin?"*":r._origin,r._hub.postMessage(JSON.stringify(a),i),o&&(Array.prototype.toJSON=o)})))},t.exports?t.exports=r:e.CrossStorageClient=r}()},function(t,e,a){var r;r={init:function(t){var e=!0;try{window.localStorage||(e=!1)}catch(t){e=!1}if(!e)try{return window.parent.postMessage("cross-storage:unavailable","*")}catch(t){return}r._permissions=t||[],r._installListener(),window.parent.postMessage("cross-storage:ready","*")},_installListener:function(){var t=r._listener;window.addEventListener?window.addEventListener("message",t,!1):window.attachEvent("onmessage",t)},_listener:function(t){var e,a,s,o,i,n,c;if(e="null"===t.origin?"file://":t.origin,"cross-storage:poll"===t.data)return window.parent.postMessage("cross-storage:ready",t.origin);if("cross-storage:ready"!==t.data){try{s=JSON.parse(t.data)}catch(t){return}if(s&&"string"==typeof s.method&&(o=s.method.split("cross-storage:")[1])){if(r._permitted(e,o))try{n=r["_"+o](s.params)}catch(t){i=t.message}else i="Invalid permissions for "+o;c=JSON.stringify({id:s.id,error:i,result:n}),a="file://"===e?"*":e,window.parent.postMessage(c,a)}}},_permitted:function(t,e){var a,s,o;if(a=["get","set","del","clear","getKeys"],!r._inArray(e,a))return!1;for(s=0;s<r._permissions.length;s++)if((o=r._permissions[s]).origin instanceof RegExp&&o.allow instanceof Array&&o.origin.test(t)&&r._inArray(e,o.allow))return!0;return!1},_set:function(t){window.localStorage.setItem(t.key,t.value)},_get:function(t){var e,a,r,s;for(e=window.localStorage,a=[],r=0;r<t.keys.length;r++){try{s=e.getItem(t.keys[r])}catch(t){s=null}a.push(s)}return a.length>1?a:a[0]},_del:function(t){for(var e=0;e<t.keys.length;e++)window.localStorage.removeItem(t.keys[e])},_clear:function(){window.localStorage.clear()},_getKeys:function(t){var e,a,r;for(r=[],a=window.localStorage.length,e=0;e<a;e++)r.push(window.localStorage.key(e));return r},_inArray:function(t,e){for(var a=0;a<e.length;a++)if(t===e[a])return!0;return!1},_now:function(){return"function"==typeof Date.now?Date.now():(new Date).getTime()}},t.exports?t.exports=r:e.CrossStorageHub=r}]);
//# sourceMappingURL=bundle.js.map